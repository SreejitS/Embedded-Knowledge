 ## Lesson 16: Interrupt Part-1
- Busy-waiting, polling: This is an approach, in which the program keeps checking a for a certain condition to occur in order to do something in response. There are many kinds of polling, some more clever than the others. But the busy-wait polling for longer periods of time, like the delay() function, is one of the most brain-dead ones, because it ties up the CPU completely and renders it unavailable for any other work.
- One common flow of a developer getting to know about the interrupts, is via the delay functions, which is initially implemented as a polling logic, then becomes more efficient using interrupts. So, let's think about interrupts in terms of alarm clocks. Just like alarm clock of the real world, controllers have dedicated hardware for timers and interrupts.
- The `SysTick` is a hardware peripheral meaning that it is a separate hardware block on the MCU silicon. It is clocked by the CPU clock and consists of three registers.
	- There are 3 registers.`STCURRENT` or `SysTick->Val` is a simple, 24-bit down-counter that decrements by one at every CPU clock cycle. When the counter reaches zero, it can generate an alarm (i.e., an interrupt) to the CPU.
	- After this the counter automatically reloads from the `STRELOAD` register, which in software will be called `SysTick->LOAD`, and starts decrementing again. By writing a different value into the `SysTick->LOAD` register, you can set up a different time between the interrupts.
- Hardware for handling the interrupts: 
	- The CPU has a special built-in hardware that samples the status of the interrupt line after every instruction. If interrupt line is low, the CPU fetches the next instruction in the pipeline. 
	- When interrupt line is high, the special CPU hardware forces the CPU to execute the Interrupt Entry instruction. This is called *PREEMPTION*. 
	- The interrupt line can change its status at any time and typically in the middle of an instruction, completely *ASYNCHRONOUSLY* to the instruction execution.
	- CPU has a special Interrupt Entry instruction, which is often one of the longest in the instruction set. ARM Cortex-M Interrupt Entry takes at least 12 cycles, whereas other simpler instructions, such as MOV or ADD, can execute in just 1 clock cycle.
- All CPUs have a way to block the interrupt line in software. ARM Cortex-M CPUs have a special bit called PRIMASK that must be cleared in software for interrupts to reach the CPU. To enable the interrupts, you need to add a call to the IAR intrinsic function `__enable_interrupt()`. This function will clear the PRIMASK bit.
- Next we will look into [[17. Interrupts Part-2|pre-emption]]
